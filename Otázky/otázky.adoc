Zkouškové otázky z předmětu Operační systémy
============================================
:toc: 
:imagesdir: ./pics/

== 1. Otázka ==
=== Co je operační systém. 
Operační systém jsou programové
moduly ve výpočetním systému, jež
ovládají řízení prostředků, kterými je
tento výpočetní systém vybaven, jako
jsou procesory, paměť (operační i
vnější), I/O zařízení a soubory dat.
Operační systém rozhoduje spory, snaží
se optimalizovat výkon a zjednodušují
efektivní využívání výpočetního
systému.

===  Úkoly operačního systému. 
* Správa a přidělování paměti – virtuální paměť
* Správa procesů – synchronizace
* Přidělování procesoru – multitasking
* Řešení zablokování – deadlock
* Správa systému souborů – virtuální souborový systém (VFS)
* Správa uživatelů

===  Zavedení operačního systému. 
* Z BIOSu (Basic Input Output System –
programovatelná paměť) nebo UEFI (Unified
Extensible Firmware Interface) se zjistí
médium, na kterém je OS
* Na tomto médiu se na MBR (Master Boot
Record) načte OS nebo zavaděč OS
* Příklad Linux:
** Zavaděč GRUB
** Jádro /boot/vmlinuz a RAM disk /boot/initrd
(nemusí být) se zavedou do paměti a
převezmou řízení počítače

=== Rozdělení operačních systémů. 
* Podle správy uživatelů
** Jednouživatelské (monouser)
** Víceuživatelské (multiuser)
*** Více uživatelů pracuje současně v reálném čase
*** Musí zajistit rozdělení a oddělení prostředků (paměti) mezi uživatele
* Podle počtu spuštěných programů
** Jednoprogramové (monotasking)
** Víceprogramové (multitasking) – více úloh je spuštěno současně
* Podle schopnosti práce v síti
** Lokální - nedokáží pracovat v síti bez přídavných modulů
** Síťové - mají klientskou i serverovou verzi
* Podle míry specializace
** Speciální - pro jeden typ úloh
** Univerzální - různé typy úloh

===  Vlastnosti operačních systémů. 
TODO

===  Real time OS.
* Zvláštní kategorie
* Takové OS, které musí být schopny práce v reálném čase a reagovat okamžitě (reálně do určité časové hranice). Např. při řízení letadla nebo jaderné elektrárny, kde velké prodlevy jsou nemožné.
* Musí reagovat okamžitě — horní časová hranice
* Většinou mají malé jádro (mikrojádro), které ovládá jen základní funkce a na vše další se volají moduly
* Příklady:
** QNX
** RTLinux – rozšíření jádra Linuxu
** RTX — RealTime eXtension – nadstavba pro Windows

== 2. Otázka
=== UNIX – historie
* Druhá polovina šedesátých let
* Vyvinut ze systému Multics
* Původně vyvinut jako systém pro zpracování textů
* Autoři Ken Thompson a Denis Ritchie
* Název vymyslel Brian Kernighan
* Původně napsán v jazyce B, z kterého byl
* Vyvinut v r. 1971 jazyk C

=== Vlastnosti OS UNIX
* Multiprogramový
* Multiuživatelský
* Víceprocesorový
* S terminálovým přístupem
* Operační systém UNIX musí uživateli u terminálu vytvořit pocit, že počítač schovaný za terminálem je pouze" jeho.
* Jádro běží v privilegovaném režimu
* Obvykle je tvořeno jedním souborem – monolitický systém (v Linuxu /boot/vmlinuz)
* Vše ostatní běží v uživatelském režimu

=== Souborové systémy v UNIXu
* Systém souborů extended FS, (e2fs, e4fs) XFS (Linux), ufs (Solaris), HFS (OS X)
* UNIX (Linux) má jednotnou strukturu adresářů – měla by být jednotná na všech systémech
* Norma POSIX a POSIX-2
* Extended
** Verze Ext (již se nepoužívá), Ext2, Ext3 a Ext4
** Bloky mají velikost 512, 1024, 2048 nebo 4096 B.
** První blok je boot blok.
** Další bloky jsou rozděleny do skupin, každá obsahuje superblok s informacemi o celém disku - při poškození jednoho se použije jiny.
** Informace o souborech jsou v tzv. i-node (i-uzel).
** Volné místo se eviduje v řetězovém seznamu.
** Moznost použít odkazy (linky)
* XFS - Žurnálovací systém. 64 bitový - velikost souboru i souborového systému téměř neomezena. Jsou žurnálována metadata ale ne samotná data - rychlejší ale méně bezpečný než ext4.
* ZFS - Zettabyte File System. 128 bitový systém. Má v sobe přímo integrován manažer logických oddílů. Až 1 ZB dat (1 ZB = 1 bilion TB). Umí automaticky opravovat chyby.
* BTRFS - souborový systém podobny ZFS, založený na B stromech.
* APFS – Apple File System (Starší HFS+) – pro Macos

=== Prvky ochrany souborů a adresářů v UNIXu

Prvky ochrany se určují zvlášť pro:

* majitele souboru (u - user)
* skupinu uživatelů (g - group)
* ostatní, svět (o - other)
* všechny (a - all)

Přidělují se práva pro:

* soubor
** čtení (r)
** zápis (w)
** provedení (spuštění - x)
* adresář
** výpis obsahu (r)
** přejmenování (smazání) (w)
** vstup do adresáře (x)

=== Linux – historie 
Linux vytvořil student Linus Torvalds pomocí operačního systému Minix profesora Tannenbauma v roce 1991

* Tento svůj systém oznámil v mailové konferenci 25. srpna 1991 V té době studoval na univerzitě v Helsinkách informatiku ve druhém ročníku
* Používal PC 386 s 4 MB paměti

=== Vlastnosti OS Linux
* Operační systém Linux je volně šiřitelný OS typu UNIX. Jeho autorem je Linus Torvalds a mnoho dalších programátorů v Internetu. Jádro Linuxu je volně šiřitelné (public domain) podle pravidel GNU General Public License (licence používaná u softwaru GNU).
* Základem Linuxu je jádro, které je vlastně samotný Linux. K němu se potom nabalují další programy
* Množiny programů tvoří distribuce
* Existuje stovky distribucí 

=== Distribuce a jádro Linuxu
Balíky programů, dané dohromady nějakou firmou nebo skupinou lidí

* komerční – platí se buď přímo za média (obvykle lze stáhnout zdarma verzi z ftp) nebo za podporu a manuály
* nekomerční
* překládané – uživatel si stáhne zdrojové texty a distribuci si sám přeloží
* live – pracují přímo z CD, není nutný HD

Linux je možno instalovat z CD (DVD), USB disku nebo po síti (FTP, lokální síť)
* I v druhém případě potřebujeme instalační USB disk nebo CD ze kterého se zavede základní systém
* Je možná i síťová instalace s nabootováním přes síť, ale musí to zvládat síťová karta
* V případě překládané instalace se zavede základní systém a překladač z CD nebo USB disku, pak se z internetu stáhnou zdrojové kódy a celý systém se přeloží

=== MacOS
* Vlastní operační systém
* Nebyl nikdy portován pro jiné platformy
* Verze 1 až 9
* Verze 1 až 8.1 pro M86k procesor
* Verze 7.2 až 9 pro PPC
* Od verze 8.0 pro G3 procesor
* Od 8.6 pro G4 procesor
* Verze 1 až 7.5.5 jsou volně šiřitelné
* Verze 7.6 a novější ne
* MacOS X

Vývoj:

* Systém 4.2 podpora 32 MB disků
* Systém 5 – v prodeji velmi krátce
* Systém 6 barvy
* Systém 7 - nazván jako první MacOS 7

MacOS 7:

* Multitasking
* Odpadkový koš
* Sdílení souborů, Apple Talk
* Aliasy (linky) – fungovaly i když byl cílový soubor překopírován
* Doplňky – extension
* Ovládací panely
* Apple menu
* AppleScript
* TrueType fonty
* Více disket, později na CD

iOS:

* Operační systém pro přenosná zařízení
* iPod touch, iPad, iPhone
* Původně chtěl Apple použít Android nebo upravený Linux
* iOS je úpravou a zjednodušením Mac OS X

== 3. Otázka
=== OS firmy Microsoft přehled, vlastnosti
==== MS DOS
** V roce 1980 pro firmu IBM pro počítač IBM PC 5150
** Koupen za 50 000 dolarů od firmy Seattle Computer Products jako QDOS (Quick and Dirty Operating System)
** Upraven pro IBM PC
** Vycházel z OS CP/M
** IBM PC 5150 – procesor 8086 4,77 Mhz, 64 kB RAM, černobílý monitor, disketová jednotka, klávesnice, stál cca. 4500 dolarů
** Vlastnosti:
*** Jednouživatelský
*** Jednoprogramový
*** Lokální
*** Vrstvená struktura
*** Verze 1.0 až 8.0
*** Poslední „čistá verze“ 6.22
*** 7.0 = Windows95
*** 7.1 = Windows98
*** 8.0 = Windows Me
** Vrstvy MS DOSu:
*** BIOS – základní ovládání HW pomocí softwarových a hardwarových přerušení, IO.SYS – obsluha periferií
*** jádro systému – soubor MSDOS.SYS – monolitické jádro
*** textové rozhraní mezi systémem a uživatelem – soubor COMMAND.COM (obsahuje některé příkazy = vnitřní příkazy). Ostatní příkazy (externí) jsou programy s koncovkou COM (do 64 kB) a EXE
*** Poslední vrstva obsahuje tyto vnější příkazy, dále uživatelské programy a dva konfigurační soubory
*** CONFIG.SYS – nastavení hardware – ovladače pro monitor, CD ROM, znaková sada
*** AUTOEXEC.BAT – nastavení software

==== Windows 1.0
** Tyto první Windows byly dodávány na pěti 5,25palcových 360kB disketách: Setup/Build, Utilities, Fonts, Desktop Applications a Program Disk.
** Nainstalované na disku zabraly méně jak 1 MB.
** Podporovaly několik ukazovacích zařízení, grafiku CGA, Hercules a EGA a také 19 tiskáren.
** Obsahovaly v základu správce souborů, kalkulačku, kalendář, kartotéku, hodiny, poznámkový blok, terminál, MS-DOS Executive, hru Reversi, Control Panel, PIF (Program Information File) Editor, Print Spooler, Clipboard, RAM Drive, Windows Write, Windows Paint.
** Microsoft Write měl podporu více písem a základním formátováním znaků a odstavců, zavedl také příponu  DOC.
** Zavedena klávesová zkratka Alt-F4 pro zavírání aplikací.

==== Windows 2.0
** 9. prosince 1987 – pro procesor 286
** Poprvé se objevuje DDE (dynamická výměna dat mezi aplikacemi).
** Poprvé se mohla jednotlivá okna aplikací přes sebe překrývat.

==== Windows 2.1
** 1987
** Windows/386 – pro procesor 386
** verze 2.0 přejmenována na Windows/286.
** 28. června 1988 verze 2.1 pro obě varianty Windows tedy 286 i 386.
** Verze pro procesor 386 uměla současně spouštět více aplikací pro DOS současně a také pracovat s více paměti.

==== Windows 3.0
** 22. května 1990
** Vlnu přechodu z prostředí MS-DOS na Windows
** Plná podpora instrukcí 80386
** Umí adresovat větší paměť pro jednotlivé aplikace,
** Podporovaly 16barevné prostředí
** Přepracovaný správce programů s ikonkami programů sdružovanými do skupin
** V roce 1991 byly tyto Windows aktualizovány o multimediální funkce.
** Objevují se i první grafické karty optimalizované pro Windows nabízející vyšší rozlišení a barevné hloubky.
** Roste počet aplikací
** Optimalizace hardware pro Windows

==== Windows 3.1
** Duben 1991
** Vylepšení verze 3.0.
** Lepší podpora multimedí.
** První verze DTP programů převedené z Mac OS – Adobe Photoshop a QuarkXpress.
** Instalaci tvořilo sedm 3,5palcových disket o kapacitě 1,4 MB, na disku instalace zabrala 4,5 MB.
** První Windows lokalizované do češtiny

==== Windows 95
** Srpen 1995, masivní reklamní kampaň.
** Nového uživatelské rozhraní
** Integrovaná podpora TCP/IP.
** Multitasking, plug-and-play, připojování k síti přes modem.
** V systému není internetový prohlížeč, pouze v rámci placeného Plus! Packu a samostatně zdarma se objevil na podzim roku 1995.
** Windows 95 OSR 2 (1996) – dostupná jen pro výrobce počítačů, podpora FAT32.
** DirectX – herní platforma

==== Windows 98
** Červen 1998
** Podpora DVD mechanik, USB zařízení (Windows 95 šly doplnit
** částečnou podporu), AGP a FireWire.
** Podporovány systémy s více monitory.
** Přímo v systému Internet Explorer 4.0.

==== Windows Me
** 2000 Windows Millennium Edition (Windows ME).
** Zamaskování MS-DOSu
** System Restore pro obnovu poškozených systémových souborů.
** Movie Maker a Media Player 7.
** Značná kritika uživatelů pro svou nespolehlivost.

==== Windows 2000
** Únoru 2000.
** Interní číslo verze je NT 5.0, ale Microsoft rozhodl, že opustí číslování verzemi a přešel na číslování verzí podle roku.
** Cílem verze 2000 bylo nahradit platformu NT a 9X ve firemním a domácím prostředí jediným společným základem.
** Podpora pro moderní hardware: Firewire, infraporty, USB, bezdrátové sítě, remote desktop, VPN.

==== Windows XP

==== Windows Vista
** Aero – nové grafické rozhraní – ale musí mít podporovaný hardware
** Vyhledávání pomocí indexování souborů
** Podpora XML
** Podpora Ipv6

==== Windows 7
** 64 i 32 bit pro osobní počítače
** 64 bit pro server
** Náročnější na HW
*** 64b chce
**** 2 GB RAM (max 192 GB)
**** 20 GB disk
*** 32b chce
**** 1 GB RAM (max 4 GB)
**** 16 GB disk
** Binární zavaděč

==== Windows8
** Nová verze Windows 8.1
** Optimalizováno pro mobilní a dotyková zařízení
** Dva módy:
*** Tablety
*** Klasická plocha

==== Windows 10

=== Souborové systémy ve Windows, přehled, vlastnosti
Řada systémů Windows NT používá souborové systémy FAT, NTFS, exFAT, Live File System a ReFS (poslední z nich je podporován až Windows Server 2012 R2, ale Windows z nich nemůže nabootovat). Windows používá u každého souborového systému pro označení jeho kořene další písmeno abecedy. Například cesta C:\Windows představuje adresář Windows na disku pojmenovaném C. Označení C: je nejčastěji používáno jako označení primárního oddílu, na kterém bývá operační systém nejčastěji nainstalován.

==== FAT
Poměrně starý systém - prvně použit u MS DOSu

* Nepoužívá žurnálování
* Používá se na paměťových kartách a flash discích.
* Používá se tabulka FAT (File Allocation Table) - informace kde je co uložené.
* Stromová struktura
* Maximálně 255 položek v kořenovém adresáři.
* FAT N (FAT 12, FAT 16, FAT 32) - umožňuje adresovat maximálně 2^N clusteru.
* Dříve 8+3 jméno souboru + přípona, dnes rozšíření VFAT.
* Ve Windows maximálně 32 GB oddíl.
* FAT32 naopak minimálně 512 MB.
* Maximální velikost souboru 4 GB.

==== NTFS
* Prvně u Windows NT.
* Neumožnuje používat male disky (diskety) - minimální velikost 4 GB
* Možnost nastavit práva
* Možnost indexovat soubory
* Názvy v Unicode
* Dynamické přemapování vadných sektoru.
* Šifrovaní a komprese.
* Pevné odkazy – funkční i po přesunu odkazovaného souboru.
* Řídké soubory – lepší uložení souboru, které mají velké části vyplněné 0

=== Prvky ochrany souborů a adresářů ve Windows
* Podobně jako v unixu se dají jednotlivým souborům nastavit oprávnění
* Windows nabízejí dvě možnosti šifrování, pomocí funkce Encrypted File System (EFS) nebo nástroje BitLocker Drive Encryption

== 4. Otázka
=== Správa paměti 

_Fragmentace je v informatice stav, kdy jsou data na datovém médiu uložena nesouvisle po částech._

=== Metoda správa jedné souvislé oblasti
* Technické vybavení
** mezní registr OS (ochrana paměti)
* Výhody:
** jednoduchost
** možnost pracovat i s malou pamětí
* Nevyhody:
** není využita celá paměť
** je-li uloha čekající, není využita paměť ani procesor
** ulohu nelze vykonat, požaduje-li větší paměť než je k dispozici

=== Metoda správa paměti pomocí sekcí
* Paměť se dělí na samostatné sekce, každá obsahuje paměťové sekce jedné úlohy
* Sledování stavu každé sekce - používá se, nepoužívá se, rozsah
** Plánovač úloh
** Přidělení paměti
** Uvolnění paměti
* Ochrana paměti (mezní registry)
* Metody
** Statické přidělování - přidělý vždy stejný blok
** Dynamické přidělování - dle potřeby úlohy
* Výhody
** multiprogramování
** není nutné speciální technické řešení 
** jednoduchá implementace
* Nevýhody
** fragmentace paměti
*** vnitřní
*** vnější
** časté změny stavových registrů
** není únosné, aby OS kontroloval registry při každém zápisu do paměti

Vnitřní fragmentace:

image::fragvnit.png[Vnitřní fragmentace]

Vnější fragmentace:

image::fragvnej.png[Vnější fragmentace]

== 5. Otázka
=== Správa paměti

_Fragmentace je v informatice stav, kdy jsou data na datovém médiu uložena nesouvisle po částech._

=== Metoda stránkování
* Adresový prostor každé úlohy se rozdělí na stejně velké sekce – stránky. Na stejně velké díly (bloky) se rozdělí operační paměť. Pak se mohou snadněji stránky přesouvat mezi bloky. 
* Bloky se stránkami jedné úlohy na sebe nemusí navazovat
* Každá stránka má registr (tabulky stránek)
* Moc velké stránky = fragmentace
* Moc malé stránky = moc registrů (náročné)
* Funkce modulů
** Sledování stavu - tabulka stránek pro každou úlohu
** Tabulka bloků - volný nebo užitý
** Plánovač úloh
** Přidělení a uvolňování bloků

Představa stránkování paměti:

image::strpampred.png[Představa stránkování paměti]

* Výhody:
** Odstranění fragmentace
** Větší počet úloh

* Nevýhody
** Náročné řešení
** Snížení rychlosti
** Tabulky zabírají paměť a snižují rychlost
** Vnitřní fragmentace - i nma malou úlohu velká stránka (stránky mají pevnou velikost)
** Omezeno fyzickým rozsahem paměti

=== Metoda stránkování na žádost

Virtuální paměť 

** Celá úloha se neumístí do operačního paměti
** Součet všech adresových prostor může překročit kapacitu paměti
* V paměti je pouze právě prováděná část úlohy
* Problém pokud program odkazuje na právě nezavedenou část úlohy
* Je nutná strategie rozhodování co má být v paměti zavedeno
* Tabulka stránek se rozšíří o stavový bit, určující zda je stránka zavedena
* Problém, není-li místo pro další stránku pak se musí nějaká odstranit (do záložní paměti). Může se stát, že tato je vzápětí požadována

Představa virtuální paměti:

image::strpredvirpam.png[Představa virtuální paměti]

Funkce modulu

* Sledování stavu paměti 
** Tabulky stránek (každá úloha)
** Bloků (jedna v systému)
** Tabulka souborů (pro každý adresový prostor úlohy) v záložní paměti 
* Rozhodování o přidělení paměti
* Přidělování paměti
* Uvolňování paměti

Algoritmy výměny

* FIFO (first in first out)
* LRU (least recently used)
* LFU (lease frequently used)
* NUR (not used recently) 
** Stránka má "used" bit, který pravidelně nuluje, pokud je třeba uvolnit z paměti vybere stránku, která má used bit 0

Výhody

* Odtranění fragmentace
* Není omezeno fyzickým rozsahem paměti
* Efektivní využití
* Multiprograming

Nevýhody

* Nákladnost
* Vnitřní fragmentace
* Nutnost ošetřit zahlcení systému
 
== 6. Otázka
=== Procesy
Proces je základní jednotka práce moderního OS se sdílením času.

* Současně běží více procesů
** Procesy OS
** Procesy aplikací
* OS střídavě obsluhuje procesy
* Program není proces, ale proces se vytvoří po spuštění programu

==== Struktura procesu
Proces obsahuje
* Ukazatel programu
* Zásobník 
** Dočasná data (parametry podprogramů, návratové adresy, dočasné proměné)
** Data pro globální proměné
* Obsah registrů procesoru

* Každý proces je reprezentován záznamem, který se jmenuje process control block (PCB), který obsahuje informace o procesu

* Struktura PCB
** Proces state
** Program counter (adresa následující insstrukce)
** Registry procesoru
** Informace plánování
** Memory management
** Accounting information (časový limit, číslo procesu)
** I/O status (seznam I/O přidělených pro tento proces, seznam otevřených souborů)

=== Životní cyklus procesu

Životní cyklus Pech:

image::procesStavDiagram.png[Proces stav diagram Pech]

Životní cyklus přednáška:

image::procesStavDiagramPred.png[Proces stav diagram přednáška]

==== Vytvoření procesu
* Proces vznikne spuštěním aplikace
* Volání jádra fork
* Proces může vytvořit nový proces
** Parent proces
** Child proces
* Dvě možnosti existence parent a child procesu
** Parent běží současně s child procesem
** Parent čeká na ukončení child procesu
* Dvě možnosti vzhledem k adrtesovému prostoru
** Child je duplikátem parent procesu
** Child má vlastní program a ten je zaveden do paměti

== 7. Otázka
=== Multitasking a jeho druhy

== 8. Otázka
=== Synchronizace procesů
=== Kritická sekce a její řešení

== 9. Otázka
=== Synchronizační problémy

== 10. Otázka
=== Deadlock a jeho řešení

== 11. Otázka
=== Struktura odkládacího zařízení, soubor, adresář, plánování disku.

== 12. Otázka
=== Souborové systémy
=== FAT
=== NTFS
=== UNIXové souborové systémy


